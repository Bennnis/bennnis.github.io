<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Reducer | Slim</title>
    <meta name="description" content="Slim: Centralized State Management With Proxy, State-Non-Editable.">
    <link rel="slim icon" type="image/x-icon" href="/slimdocs/favicon.ico">
    
    <link rel="preload" href="/slimdocs/assets/css/0.styles.a9dfea48.css" as="style"><link rel="preload" href="/slimdocs/assets/js/app.9f44fd54.js" as="script"><link rel="preload" href="/slimdocs/assets/js/12.dd155003.js" as="script"><link rel="prefetch" href="/slimdocs/assets/js/10.54e2f319.js"><link rel="prefetch" href="/slimdocs/assets/js/11.d6101f6f.js"><link rel="prefetch" href="/slimdocs/assets/js/13.75910f8a.js"><link rel="prefetch" href="/slimdocs/assets/js/14.e05d1557.js"><link rel="prefetch" href="/slimdocs/assets/js/15.5130dab1.js"><link rel="prefetch" href="/slimdocs/assets/js/16.0752120f.js"><link rel="prefetch" href="/slimdocs/assets/js/17.8c1af571.js"><link rel="prefetch" href="/slimdocs/assets/js/18.51c1ef73.js"><link rel="prefetch" href="/slimdocs/assets/js/19.3b8c97e6.js"><link rel="prefetch" href="/slimdocs/assets/js/2.fcd14679.js"><link rel="prefetch" href="/slimdocs/assets/js/20.c36db35b.js"><link rel="prefetch" href="/slimdocs/assets/js/21.e788e463.js"><link rel="prefetch" href="/slimdocs/assets/js/22.6a5f6016.js"><link rel="prefetch" href="/slimdocs/assets/js/23.873d855b.js"><link rel="prefetch" href="/slimdocs/assets/js/24.aef1a369.js"><link rel="prefetch" href="/slimdocs/assets/js/25.ec090d99.js"><link rel="prefetch" href="/slimdocs/assets/js/26.465c490f.js"><link rel="prefetch" href="/slimdocs/assets/js/27.bb1d7f3e.js"><link rel="prefetch" href="/slimdocs/assets/js/28.fa780cd6.js"><link rel="prefetch" href="/slimdocs/assets/js/29.f0c81e8d.js"><link rel="prefetch" href="/slimdocs/assets/js/3.4922e190.js"><link rel="prefetch" href="/slimdocs/assets/js/30.0da7d49c.js"><link rel="prefetch" href="/slimdocs/assets/js/31.1c0df7bd.js"><link rel="prefetch" href="/slimdocs/assets/js/4.6947a0b8.js"><link rel="prefetch" href="/slimdocs/assets/js/5.a6c4e38c.js"><link rel="prefetch" href="/slimdocs/assets/js/6.0e819283.js"><link rel="prefetch" href="/slimdocs/assets/js/7.3a81a3fe.js"><link rel="prefetch" href="/slimdocs/assets/js/8.5b89c563.js"><link rel="prefetch" href="/slimdocs/assets/js/9.6b023893.js">
    <link rel="stylesheet" href="/slimdocs/assets/css/0.styles.a9dfea48.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/slimdocs/" class="home-link router-link-active"><!----> <span class="site-name">Slim</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/slimdocs/intro.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/slimdocs/slimApi.html" class="nav-link">API</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/slimdocs/reducer.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/slimdocs/zh/reducer.html" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/victor0210/slim" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/slimdocs/intro.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="/slimdocs/slimApi.html" class="nav-link">API</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/slimdocs/reducer.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/slimdocs/zh/reducer.html" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/victor0210/slim" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>QuickStart</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/slimdocs/intro.html" class="sidebar-link">Introduction</a></li><li><a href="/slimdocs/installation.html" class="sidebar-link">Installation</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Core Modules</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/slimdocs/state.html" class="sidebar-link">State</a></li><li><a href="/slimdocs/reducer.html" class="active sidebar-link">Reducer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/slimdocs/reducer.html#design-reducer" class="sidebar-link">Design reducer</a></li><li class="sidebar-sub-header"><a href="/slimdocs/reducer.html#update-state" class="sidebar-link">Update State</a></li><li class="sidebar-sub-header"><a href="/slimdocs/reducer.html#incoming-multiple-parameters" class="sidebar-link">Incoming multiple parameters</a></li></ul></li><li><a href="/slimdocs/action.html" class="sidebar-link">Action</a></li><li><a href="/slimdocs/plugin.html" class="sidebar-link">Plugin</a></li><li><a href="/slimdocs/event.html" class="sidebar-link">EventCenter</a></li></ul></div></li><li><a href="/slimdocs/slimApi.html" class="sidebar-link">API</a></li><li><a href="/slimdocs/controlLevel.html" class="sidebar-link">Mode</a></li><li><a href="/slimdocs/vslim.html" class="sidebar-link">VSlim</a></li><li><a href="/slimdocs/rslim.html" class="sidebar-link">RSlim</a></li><li><a href="/slimdocs/devtool.html" class="sidebar-link">Slim-DevTools</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="reducer"><a href="#reducer" aria-hidden="true" class="header-anchor">#</a> Reducer</h1> <p><strong>Reducers</strong> specifies the <strong>Store</strong> update<strong>State</strong> update timing, which only describes the change process of <strong>State</strong>.</p> <div class="warning custom-block"><p class="custom-block-title">attention</p> <p>Please don't put the business logic in the Reducer, which will make the Reducer huge or even not reusable and not well maintained. It is recommended to put asynchronous operations and business logic into [Action] (/zh/action.html).</p></div> <h2 id="design-reducer"><a href="#design-reducer" aria-hidden="true" class="header-anchor">#</a> Design reducer</h2> <p>In <strong>Slim</strong>, a <strong>Reducer</strong> is defined as a key-value pair. Let's see how to implement a <strong>Reducer</strong>. In our simple counter application, we want to have two things:</p> <ul><li>increment the count：increment</li> <li>decrement the counet：decrement</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Slim <span class="token keyword">from</span> <span class="token string">'slim-store'</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> counters <span class="token operator">=</span> <span class="token punctuation">{</span>
    increment<span class="token punctuation">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// increment count</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    decrement<span class="token punctuation">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// decrement count</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> Slim<span class="token punctuation">.</span><span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    reducers<span class="token punctuation">:</span> counters<span class="token punctuation">,</span>
    state
<span class="token punctuation">}</span><span class="token punctuation">)</span>

store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">)</span>
</code></pre></div><p>Executing <strong>Reducer</strong> is very simple, just execute <code>store.commit(reducerKey, ...arguments)</code>.</p> <h2 id="update-state"><a href="#update-state" aria-hidden="true" class="header-anchor">#</a> Update State</h2> <p>How to update <strong>State</strong> in <strong>Reducer</strong>? We offer two possible ways</p> <h3 id="return-a-brand-new-state-object"><a href="#return-a-brand-new-state-object" aria-hidden="true" class="header-anchor">#</a> Return a brand new State object</h3> <p>This pure function notation makes the entire <strong>Reducer</strong> more testable, with no side effects (no effect on parameter changes outside the function). But in its complex <strong>State</strong> structure will make the overall operation and performance costs higher.</p> <h3 id="change-directly-on-the-state-object"><a href="#change-directly-on-the-state-object" aria-hidden="true" class="header-anchor">#</a> Change directly on the State object</h3> <p>This method will appear simple and convenient in most cases.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>increment<span class="token punctuation">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>count<span class="token operator">++</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Each of the above methods has its own advantages and disadvantages. You can choose different treatment methods according to the specific conditions in the application.</p> <h2 id="incoming-multiple-parameters"><a href="#incoming-multiple-parameters" aria-hidden="true" class="header-anchor">#</a> Incoming multiple parameters</h2> <p>When using <strong>Reducer</strong>, there will be a need to pass the corresponding parameters, and the parameter transfer is very convenient in <strong>Slim</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>increment<span class="token punctuation">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">,</span> count<span class="token punctuation">,</span> times<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>state<span class="token punctuation">,</span>
        Count<span class="token punctuation">:</span> count <span class="token operator">*</span> times <span class="token comment">// 20</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'increment'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>The required parameters are registered directly in the <strong>Reducer</strong> function, and can be directly separated by commas in <code>store.commit</code>.</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/victor0210/slim/edit/master/docs/reducer.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2/20/2019, 6:05:34 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/slimdocs/state.html" class="prev">
          State
        </a></span> <span class="next"><a href="/slimdocs/action.html">
          Action
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/slimdocs/assets/js/app.9f44fd54.js" defer></script><script src="/slimdocs/assets/js/12.dd155003.js" defer></script>
  </body>
</html>
